<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Savitr: one that rises and sets</title>
    <link rel="stylesheet" href="styles.css">
    <script src="jquery-3.3.1.min.js"></script>
    <script src="savitr.js"></script>

    <script>
      // urlParam copied from https://stackoverflow.com/questions/7731778/get-query-string-parameters-with-jquery
      $.urlParam = function (name) {
          var results = new RegExp('[\?&]' + name + '=([^&#]*)')
                            .exec(window.location.search);

          return (results !== null) ? results[1] || 0 : false;
      }

      $(function() {
        var game_seed = $.urlParam('game_seed') || true;

        var this_game_board = $('#my_game');
        var game = new Savitr(this_game_board, {columns: 3, rows: 4, shuffle: game_seed});
        game.start();
      });
    </script>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Savitr</h1>
        <p>"In due place, Savitr hath <strong>set</strong> each creature." - Veda Hymn</p>
      </div>

      <a href="#instructions" onclick="$('.instructions').toggle()">hide/show instructions</a>
      <div class="instructions">
        <h3>How to Play Set</h3>
        <p>A <span class="highlight">Set</span> consists of three cards where each feature is either the same on all three cards or different on all three cards.</p>
        <p><strong>Features:</strong> Number (1, 2, or 3), Color (Red, Green, or Purple), Shading (Empty, Striped, or Solid), and Shape (Oval, Squiggle, or Diamond)</p>
        <p><strong>Goal:</strong> Find as many sets as possible! Click on three cards to select them. If they form a valid set, they'll be highlighted. If you can't find all the sets, click "Finish" to see what you missed.</p>
      </div>

      <div class="mode-picker">
        <h2>Choose a game mode</h2>
        <div class="mode-cards">
          <a href="single.html" class="mode-card">
            <span class="mode-icon">◆</span>
            <h3>Single</h3>
            <p>A simple, zen experience. Find all the sets on the board at your own pace. Use hints or finish when you're done.</p>
          </a>
          <a href="challenge.html" class="mode-card">
            <span class="mode-icon">⏱</span>
            <h3>Challenge</h3>
            <p>Timed mode with limited time and skips. Find as many sets as you can before time runs out.</p>
          </a>
        </div>
      </div>

      <div class="footer">
        <p><a href="https://github.com/erikhatcher/savitr" target="_blank">View on GitHub</a></p>
      </div>
    </div>
    <style>
      .mode-picker { margin-bottom: 30px; }
      .mode-picker h2 {
        text-align: center;
        color: #4a5568;
        margin-bottom: 24px;
        font-size: 1.5rem;
      }
      .mode-cards {
        display: flex;
        gap: 24px;
        flex-wrap: wrap;
        justify-content: center;
      }
      .mode-card {
        display: block;
        flex: 1;
        min-width: 260px;
        max-width: 380px;
        padding: 28px 24px;
        background: linear-gradient(145deg, #f7fafc 0%, #edf2f7 100%);
        border: 2px solid #e2e8f0;
        border-radius: 16px;
        text-decoration: none;
        color: inherit;
        transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
      }
      .mode-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 24px rgba(102, 126, 234, 0.2);
        border-color: #667eea;
      }
      .mode-icon {
        display: block;
        font-size: 2rem;
        margin-bottom: 12px;
        color: #667eea;
      }
      .mode-card h3 {
        color: #2d3748;
        margin-bottom: 10px;
        font-size: 1.4rem;
      }
      .mode-card p {
        color: #718096;
        line-height: 1.5;
        font-size: 0.95rem;
      }
    </style>
  </body>
</html>
